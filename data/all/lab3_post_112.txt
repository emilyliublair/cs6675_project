Question: 
    Test Failed: Make FailureAfter implementing Part 1, I tried running the autograder but keep getting make failure. I've tried implementing stubs for the following syscalls as perhttps://piazza.com/class/m5l90em6d0u656/post/332:clonewaitpidparksetparkunparkwaitinfoIs there anything I'm missing?lab3

    Student Answer: 
    

    Instructor Answer: 
    What you’re looking at is a triple fault, a type of catastrophic failure where the CPU undergoes an interrupt, then faults when trying to handle that interrupt, then faults again, and at that point it just resets the whole computer to the beginning of the BIOS because something is seriously wrong.It looks like this is happening when or after exit() is called. Here’s my best guess as to what might be happening: if you call wait() in the parent, and in doing so free the child’s page directory, that page directory is the current page directory because you are currently in the parent thread’s context and it shares its pgdir with the child. Kfree overwrites the pgdir with junk, somewhere along the way CR3 is reloaded or a TLB miss happens, and the OS gets an interrupt, can’t run the trap handler because the pgdir is filled with junk, then page faults twice more, giving the triple fault. You should make sure you never clean up after a thread that is not a thread group owner, as if it’s a child thread, then other threads are still using those resources.(Thank you for providing so many details in your question btw. Hopefully I was right and this helps!)

    Followup Discussions:
    @397_f1Anonymous Beaker1 month agoYep that was it; added one line and now passing all except 2 tests - thanks!0Shourik Banerjee1 month agoI am having the same issue, did you have to modify wait?0
    