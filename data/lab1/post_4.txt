Question: 
    What outputs do tests 4-7 look atI’m having trouble figuring out why tests 4-7 are giving the “incorrect output” error, since when testing locally it seems to give the correct numbere. Some hints on where to look would be appreciated!lab1

    Student Answer: 
    

    Instructor Answer: 
    They are all focused on your e820 implementation. I’d suggest making sure that when you run xv6 with a certain amount of memory, you can actually allocate that much memory from within the system.That is, when you run./xv6-qemu -m <mem>, where<mem>is some amount of memory like256Mor1G, and allocate as much memory as you can in a user process, you should be able to allocate an amount very close to<mem>, probably within 1-2MB of the actual value factoring in overhead from the kernel itself.

    Followup Discussions:
    @163_f1Anonymous Gear2 months agoFrom what I’m seeing with the e820 records, a few MB (but more than 2MB) of the RAM are type 2, which the lab tells us not to count as available memory. The sum of RAM that is type 1 is still very close to the size of allocated memory, though. Is this expected behavior or am I messing up somewhere with determining the type field?Also, does each test case check only one RAM size or does each check multiple? If it’s the latter then I might have an idea on what’s causing the error.0Rohan Natansh Bafna2 months agoFrom what I’m seeing with the e820 records, a few MB (but more than 2MB) of the RAM are type 2, which the lab tells us not to count as available memory. The sum of RAM that is type 1 is still very close to the size of allocated memory, though. Is this expected behavior or am I messing up somewhere with determining the type field?Don’t just check the e820 records (although it’s good that you are parsing them correctly!), check how much memory your system is actually able to use. If you give xv6 1G of ram, then you should be able to malloc close to 1GB of memory in a user process. And yes, there will be some type 2 RAM on your system; ignore that. Only focus on type 1.Also, does each test case check only one RAM size or does each check multiple? If it’s the latter then I might have an idea on what’s causing the error.I don’t think I should answer this directly. But I will say that, across all the tests, we do check the behavior of the system with different amounts of RAM.good comment0Anonymous Gear2 months agoThanks for the answer! I did check with limits.c and it is able to allocate more memory as I give qemu a larger RAM. However, it seems that the maximum amount of allocateable memory is only around half of the total ussable RAM. Is that normal behavior?0Anonymous Gear2 months agoEdit - the half of total RAM is due to a bug in my code0
    