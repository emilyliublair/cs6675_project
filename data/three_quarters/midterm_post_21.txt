Question: 
    Supervised Lab Week 8Forgot to take week 8 lab quiz and am unable to see the questions. Any way this could be opened up for exam prep reasons?midterm

    Student Answer: 
    

    Instructor Answer: 
    no, we do NOT have to make an additional copy of the shadow bit itself. It's updatable by itself. We achieve atomicity of shadow bit update by relying on its boolean property. So we perform a DIRECT update to the shadow bit and expect it to end up in a zero or non-zero state after performing a direct shadow bit update.Thanks for the question.AT

    Followup Discussions:
    @717_f1Alexey Tumanov4 days agoin general, as you think through all of these ordering and atomicity slides, it's important to really understand theconcept of atomicityitself. Try to convince yourself that everything we call atomic happens in "all or nothing" fashion. Block level updates -- the all or nothing semantics is achieved with a {copy, update, and bit flip} sequence. Think through this again -- at the end you will get the write fully succeed OR you will get none of the write succeed. That's the atomicity property. For the bit flip -- an atomic update to the bit flip is achieved either by flipping it OR not flipping it. We can't leave the shadow bit in any other state in between.good comment0Anonymous Mouse4 days agoThat makes sense, thanks. I get that the shadow bit fip itself is atomic in the sense that it’s flipped or not flipped, but I’m confused about why we can modify it in-place on the disk when we cannot modify other blocks in-place on the disk. Does the disk driver have a special mechanism for modifying just one bit, or is it stored in a specific area on disk that can be modified in-place? In my head, I’m thinking the shadow bit is physically the same as any other bit, so to modify it we have to copy and update the block it belongs to just like we have to for any other data.Is it that the copy-and-update isn’t actually required by the disk itself, but just generally necessary for anything more than one bit?0Alexey Tumanov4 days agoI see, makes sense. Yes, absolutely, this is a great question. The corollary or the implication is that we can't really coalesce multiple shadow bits into the same block on disk. Doing so would require a non-atomic update (read, modify, write), which itself could be corrupted. So one way we could address this is to use a whole block for just a single shadow bit. Then a block full of zeros (512B of zeros) would then be interpreted as a zero, and everything else would be interpreted as a 1.good comment1Alexey Tumanov4 days agothere may be other mechanisms, for instance, some disk manufacturer hardware support for atomic test and set operations, just like we have for memory. But we didn't cover them in class, so let's stick to this one very wasteful but _correct_ way of supporting atomic bit flips.good comment0Alexey Tumanov4 days agohappy to discuss this further in office hours.good comment0
    